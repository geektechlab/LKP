The *offp should be updated after each data transfer to represent the current file position after successful completion of the system call. Othrwise it will take same one as previous call. That's why previous example was failing.
