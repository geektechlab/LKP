Which one to choose for critical region: spin lock vs semaphore?
